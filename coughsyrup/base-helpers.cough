define (['constants'], (c) ->

  black? = \sq ->
    sq == String.toLowerCase sq && sq != c.empty-square

  defaults = \mixin \val ->
    for prop of mixin
      val[prop] = mixin[prop] if val[prop] == undefined

    val

  white? = \sq ->
    sq == String.toUpperCase sq && sq != c.empty-square

  to-black = String.toLowerCase

  to-white = String.toUpperCase

  return {
    black?
    defaults
    white?
    to-black
    to-white
  }

)
